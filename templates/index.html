{% extends "base.html" %}

{% block title %}EXP Reviews{% endblock %}

{% block content %}

<div class="jumbotron jumbotron-fluid">
    <div class=container>
        <h1 style="text-align: center;">EXP Reviews</h1>
        <img src="/static/img/jumbotron.jpg" style="width: 100%; height: 100px;">
    </div>
</div>
<!-- End homepage jumbotron -->

<div class="container-fluid">

    {% if session.get("user_id") and recommended_list%}
    <div class="row">
    <h3>Recommended for You</h3>
    <div id="recommended-carousel" class="carousel slide" data-ride="carousel">

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
            <div class="item active">
                <div class="row">
                {% for review in recommended_list[:4] %}
                    <div class="col-xs-3">
                        {% if review.game.covers|length >= 1 %}
                            <img src="{{ review.game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ review.game.game_id }}">{{ review.game.name }}</a></h5>
                        </div>
                    </div>            
                {% endfor %}
                </div>
            </div>

            {% for index in range(4) %}
                <div class="item">
                    <div class="row">
                    {% for review in recommended_list[4 + (4 * index):4 + (4 * index) + 4] %}
                        <div class="col-xs-3">
                        {% if review.game.covers|length >= 1 %}
                            <img src="{{ review.game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ review.game.game_id }}">{{ review.game.name }}</a></h5>
                        </div>
                    </div>  
                    {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>

      <!-- Controls -->
        <a class="left carousel-control" href="#recommended-carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#recommended-carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div> <!-- End Rec Carousel -->
    </div>
    {% endif %}

    <div class="row">
    <h3>Popular with Our Users</h3>
    <div id="user-carousel" class="carousel slide" data-ride="carousel">

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
            <div class="item active">
                <div class="row">
                {% for game in user_list[:4] %}
                    <div class="col-xs-3">
                        {% if game.covers|length >= 1 %}
                            <img src="{{ game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ game.game_id }}">{{ game.name }}</a></h5>
                            <h3>{{ "%.1f" % game.avg_score }}</h3>
                        </div>
                    </div>            
                {% endfor %}
                </div>
            </div>

            {% for index in range(4) %}
                <div class="item">
                    <div class="row">
                    {% for game in user_list[4 + (4 * index):4 + (4 * index) + 4] %}
                        <div class="col-xs-3">
                        {% if game.covers|length >= 1 %}
                            <img src="{{ game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ game.game_id }}">{{ game.name }}</a></h5>
                            <h3>{{ "%.1f" % game.avg_score }}</h3>
                        </div>
                    </div>  
                    {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>

      <!-- Controls -->
        <a class="left carousel-control" href="#user-carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#user-carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div> <!-- End Popular Users Carousel -->
    </div>

    <div class="row">
    <h3>Popular with Critics</h3>
    <div id="critic-carousel" class="carousel slide" data-ride="carousel">

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
            <div class="item active">
                <div class="row">
                {% for game in critic_list[:4] %}
                    <div class="col-xs-3">
                        {% if game.covers|length >= 1 %}
                            <img src="{{ game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ game.game_id }}">{{ game.name }}</a></h5>
                            <h3>{{ "%.1f" % game.avg_score }}</h3>
                        </div>
                    </div>            
                {% endfor %}
                </div>
            </div>

            {% for index in range(4) %}
                <div class="item">
                    <div class="row">
                    {% for game in critic_list[4 + (4 * index):4 + (4 * index) + 4] %}
                        <div class="col-xs-3">
                        {% if game.covers|length >= 1 %}
                            <img src="{{ game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ game.game_id }}">{{ game.name }}</a></h5>
                            <h3>{{ "%.1f" % game.avg_score }}</h3>
                        </div>
                    </div>  
                    {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>

      <!-- Controls -->
        <a class="left carousel-control" href="#critic-carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#critic-carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div> <!-- End Popular Critics Carousel -->
    </div>

    <div class="row">
    <h3>Recently Reviewed</h3>
    <div id="recent-carousel" class="carousel slide" data-ride="carousel">

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
            <div class="item active">
                <div class="row">
                {% for game in recent_list[:4] %}
                    <div class="col-xs-3">
                        {% if game.covers|length >= 1 %}
                            <img src="{{ game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ game.game_id }}">{{ game.name }}</a></h5>
                            <h3>{{ "%.1f" % game.avg_score }}</h3>
                        </div>
                    </div>            
                {% endfor %}
                </div>
            </div>

            {% for index in range(4) %}
                <div class="item">
                    <div class="row">
                    {% for game in recent_list[4 + (4 * index):4 + (4 * index) + 4] %}
                        <div class="col-xs-3">
                        {% if game.covers|length >= 1 %}
                            <img src="{{ game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ game.game_id }}">{{ game.name }}</a></h5>
                            <h3>{{ "%.1f" % game.avg_score }}</h3>
                        </div>
                    </div>  
                    {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>

      <!-- Controls -->
        <a class="left carousel-control" href="#recent-carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#recent-carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div> <!-- End Recently Reviewed Carousel -->
    </div>


    <div class="row">
    <h3>Coming Soon</h3>
    <div id="soon-carousel" class="carousel slide" data-ride="carousel">

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
            <div class="item active">
                <div class="row">
                {% for game in soon_list[:4] %}
                    <div class="col-xs-3">
                        {% if game.covers|length >= 1 %}
                            <img src="{{ game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ game.game_id }}">{{ game.name }}</a></h5>
                            <h3>{{ game.release_date.strftime("%b %d, %Y") }}</h3>
                        </div>
                    </div>            
                {% endfor %}
                </div>
            </div>

            {% for index in range(4) %}
                <div class="item">
                    <div class="row">
                    {% for game in soon_list[4 + (4 * index):4 + (4 * index) + 4] %}
                        <div class="col-xs-3">
                        {% if game.covers|length >= 1 %}
                            <img src="{{ game.covers[0].url }}" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% else %}
                            <img src="/static/img/mysterious_wall_chicken.png" style="width: 250px; height: 400px; display: block; margin: auto">
                        {% endif %}
                        <div class="carousel-caption">
                            <h5><a class="game-title" href="/games/{{ game.game_id }}">{{ game.name }}</a></h5>
                            <h3>{{ game.release_date.strftime("%b %d, %Y") }}</h3>
                        </div>
                    </div>  
                    {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>

      <!-- Controls -->
        <a class="left carousel-control" href="#soon-carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#soon-carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div> <!-- End Coming Soon Carousel -->
    </div>

</div>

<script type="text/javascript">
    
    $("div.carousel").carousel({
        "interval": false
    });

</script>

{% endblock %}